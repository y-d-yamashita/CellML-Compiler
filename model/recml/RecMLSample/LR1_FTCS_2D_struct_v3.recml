<!-- 					LR1_FTCS_Diffusion_2D_struct_v3.recml		 			- -->
<!-- Structured RecML in 2D for Luo-Rudy 1991 model with diffusion	- -->
<!-- with diffusion PDE and Forward-Time Central Space Scheme (FTCS) - -->

<recml>

	<!-- loop1="inner" has loop2 inside -->
	<!-- loop2="inner" has loop3 inside -->
	<loopstruct num="0">
		<position name="inner">
			<loopstruct num="1">
				<position name="inner">
					<loopstruct num="2"/>
				</position>
			</loopstruct>
		</position>
	</loopstruct>
	
	<loopindex num="0" name="n" />
	<loopindex num="1" name="j" />
	<loopindex num="2" name="l" />

	

	
	<variable name="deltat" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="deltax1" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="deltax2" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	
	<variable name="V1end" type="output" loopcomponent1="1" />
	<variable name="V2end" type="output" loopcomponent1="1" loopcomponent2="1" />
	<variable name="V3end" type="output" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	
	<variable name="intracellular_calcium_concentration.time" type="recurvar" loopcomponent1="1" />
	<variable name="membrane.V" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current.m" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current.h" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current.j" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current.d" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current.f" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current.X" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current.Cai" type="recurvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.I_stim" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.i_Na" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.i_si" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.i_K" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.i_K1" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.i_Kp" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.i_b" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current.E_Na" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current_m_gate.alpha_m" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current_m_gate.beta_m" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current_h_gate.alpha_h" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current_h_gate.beta_h" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current_j_gate.alpha_j" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current_j_gate.beta_j" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current.E_si" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current_d_gate.alpha_d" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current_d_gate.beta_d" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current_f_gate.alpha_f" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="slow_inward_current_f_gate.beta_f" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current.g_K" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current.E_K" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current.Xi" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current_X_gate.alpha_X" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current_X_gate.beta_X" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_independent_potassium_current.g_K1" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_independent_potassium_current.E_K1" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_independent_potassium_current.K1" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_independent_potassium_current_K1_gate.alpha_K1" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_independent_potassium_current_K1_gate.beta_K1" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="plateau_potassium_current.E_Kp" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="plateau_potassium_current.Kp" type="arithvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.R" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.T" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.F" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.C" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.stim_start" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.stim_end" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.stim_period" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.stim_duration" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.stim_amplitude" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="membrane.D" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="fast_sodium_current.g_Na" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="background_current.g_b" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current.Nai" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current.Nao" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="plateau_potassium_current.g_Kp" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="background_current.E_b" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_independent_potassium_current.Ki" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_independent_potassium_current.Ko" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />
	<variable name="time_dependent_potassium_current.PR_NaK" type="constvar" loopcomponent1="1" loopcomponent2="1" loopcomponent3="1" />

	<math>
		<!-- loop1 pre  -->
		<!-- loop1 init: RecurVar  -->
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> intracellular_calcium_concentration.time </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.V </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> -83.853 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> fast_sodium_current.m </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.00187018 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> fast_sodium_current.h </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.9804713 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> fast_sodium_current.j </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.98767124 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> slow_inward_current.d </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.00316354 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> slow_inward_current.f </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.99427859 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> time_dependent_potassium_current.X </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.16647703 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> slow_inward_current.Cai </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.0002 </cn>
		</apply>
		
		<!-- loop1 init: ArithVar  -->
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.R </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 8314 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.T </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 310 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.F </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 96484.6 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.C </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 1 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.stim_start </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 10 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.stim_end </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 100000000 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.stim_period </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 1000 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.stim_duration </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 5 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.stim_amplitude </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> -25.5 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> membrane.D </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.0001 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> fast_sodium_current.g_Na </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 23 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> background_current.g_b </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.03921 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> time_dependent_potassium_current.Nai </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 18 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> time_dependent_potassium_current.Nao </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 140 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> plateau_potassium_current.g_Kp </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.0183 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> background_current.E_b </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> -59.87 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> time_independent_potassium_current.Ki </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 145 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> time_independent_potassium_current.Ko </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 5.4 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<apply><selector/>
				<ci> time_dependent_potassium_current.PR_NaK </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<cn> 0.01833 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<ci> deltax1 </ci>
			<cn> 1 </cn>
		</apply>
		<apply loop1 = "init">
			<eq/>
			<ci> deltax2 </ci>
			<cn> 1 </cn>
		</apply>
		
		<!-- loop1 inner  -->
		<apply loop1 = "inner"><eq/>
			<apply><selector/>
				<ci> intracellular_calcium_concentration.time </ci>
				<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
			<apply><plus/>
				<apply><selector/>
					<ci> intracellular_calcium_concentration.time </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				<ci> deltat </ci>
			</apply>
		</apply>
		
			<!-- loop2 pre  -->
			<!-- loop2 init  -->
			
			<!-- loop2 inner  -->
				<!-- loop3 pre  -->
				<!-- loop3 init  -->
				
				<!-- loop3 inner  -->	
				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
						<ci> membrane.I_stim </ci>
						<ci> n </ci>
						<ci> j </ci>
						<ci> l </ci>
					</apply>
					<piecewise>
					<piece>
						<apply><selector/>
							<ci> membrane.stim_amplitude </ci>
							<ci> n </ci>
							<ci> j </ci>
							<ci> l </ci>
						</apply>
						<apply><and/>
							<apply><geq/>
								<ci> intracellular_calcium_concentration.time </ci>
								<apply><selector/>
									<ci> membrane.stim_start </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
							</apply>
							<apply><leq/>
								<ci> intracellular_calcium_concentration.time </ci>
								<apply><selector/>
									<ci> membrane.stim_end </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
							</apply>
						   <apply><leq/>
								<apply><minus/>
									<apply><minus/>
										<ci> intracellular_calcium_concentration.time </ci>
										<apply><selector/>
											<ci> membrane.stim_start </ci>
											<ci> n </ci>
											<ci> j </ci>
											<ci> l </ci>
										</apply>
									</apply>
									<apply><times/>
										<apply><floor/>
											<apply><divide/>
												<apply><minus/>
													<ci> intracellular_calcium_concentration.time </ci>
													<apply><selector/>
														<ci> membrane.stim_start </ci>
														<ci> n </ci>
														<ci> j </ci>
														<ci> l </ci>
													</apply>
												</apply>
												<apply><selector/>
													<ci> membrane.stim_period </ci>
													<ci> n </ci>
													<ci> j </ci>
													<ci> l </ci>
												</apply>
											</apply>
										</apply>
										<apply><selector/>
											<ci> membrane.stim_period </ci>
											<ci> n </ci>
											<ci> j </ci>
											<ci> l </ci>
										</apply>
									</apply>
								</apply>
								<apply><selector/>
									<ci> membrane.stim_duration </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
							</apply>
						</apply>
					</piece>
						<otherwise>
							<cn> 0 </cn>
						</otherwise>
					</piecewise>
				</apply>
				
				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
						<apply><minus/>
							<apply><selector/>
								<ci> membrane.V </ci>
								<apply><plus/>
									<ci> n </ci>
									<cn> 1 </cn>
								</apply>
								<ci> j </ci>
								<ci> l </ci>
							</apply>
							<apply><selector/>
								<ci> membrane.V </ci>
								<ci> n </ci>
								<ci> j </ci>
								<ci> l </ci>
							</apply>
						</apply>
						<ci> deltat </ci>
					</apply>
					<apply><plus/>
						<apply><times/>
							<apply><divide/>
								<apply><minus/>
									<cn> 1 </cn>
								</apply>
								<apply><selector/>
									<ci> membrane.C </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
							</apply>
							<apply><plus/>
								<apply><selector/>
									<ci> membrane.I_stim </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
								<apply><selector/>
									<ci> membrane.i_Na </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
								<apply><selector/>
									<ci> membrane.i_si </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
								<apply><selector/>
									<ci> membrane.i_K </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
								<apply><selector/>
									<ci> membrane.i_K1 </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
								<apply><selector/>
									<ci> membrane.i_Kp </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
								<apply><selector/>
									<ci> membrane.i_b </ci>
									<ci> n </ci>
									<ci> j </ci>
									<ci> l </ci>
								</apply>
							</apply>
						</apply>
						<apply><times/>
							<ci> membrane.D </ci>
							<apply><divide/>
								<apply><plus/>
									<apply><selector/>
										<ci> membrane.V </ci>
										<ci> n </ci>
										<apply><plus/>
											<ci> j </ci>
											<cn> 1 </cn>
										</apply>
										<ci> l </ci>
									</apply>
									<apply><minus/>
										<apply><times/>
											<cn> 2 </cn>
											<apply><selector/>
												<ci> membrane.V </ci>
												<ci> n </ci>
												<ci> j </ci>
												<ci> l </ci>
											</apply>
										</apply>
									</apply>
									<apply><selector/>
										<ci> membrane.V </ci>
										<ci> n </ci>
										<apply><minus/>
											<ci> j </ci>
											<cn> 1 </cn>
										</apply>
										<ci> l </ci>
									</apply>
								</apply>
								<apply><times/>
									<ci> deltax1 </ci>
									<ci> deltax1 </ci>
								</apply>	
							</apply>
						</apply>	
						<apply><times/>
							<ci> membrane.D </ci>
							<apply><divide/>
								<apply><plus/>
									<apply><selector/>
										<ci> membrane.V </ci>
										<ci> n </ci>
										<ci> j </ci>
										<apply><plus/>
											<ci> l </ci>
											<cn> 1 </cn>
										</apply>
									</apply>
									<apply><minus/>
										<apply><times/>
											<cn> 2 </cn>
											<apply><selector/>
												<ci> membrane.V </ci>
												<ci> n </ci>
												<ci> j </ci>
												<ci> l </ci>
											</apply>
										</apply>
									</apply>
									<apply><selector/>
										<ci> membrane.V </ci>
										<ci> n </ci>
										<ci> j </ci>
										<apply><minus/>
											<ci> l </ci>
											<cn> 1 </cn>
										</apply>
									</apply>
								</apply>
								<apply><times/>
									<ci> deltax2 </ci>
									<ci> deltax2 </ci>
								</apply>	
							</apply>
						</apply>
					</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> fast_sodium_current.E_Na </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><divide/>
					<apply><times/>
				<apply><selector/>
					<ci> membrane.R </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> membrane.T </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><selector/>
					<ci> membrane.F </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><ln/>
					<apply><divide/>
					<apply><selector/>
					<ci> time_dependent_potassium_current.Nao </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.Nai </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> membrane.i_Na </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> fast_sodium_current.g_Na </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><power/>
					<apply><selector/>
					<ci> fast_sodium_current.m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 3 </cn>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.E_Na </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> fast_sodium_current_m_gate.alpha_m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><times/>
				<cn> 0.32 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 47.13 </cn>
				</apply>
				</apply>
					<apply><minus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.1 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 47.13 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> fast_sodium_current_m_gate.beta_m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<cn> 0.08 </cn>
					<apply><exp/>
					<apply><divide/>
					<apply><minus/>
				   <apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<cn> 11 </cn>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
					<apply><minus/>
					<apply><selector/>
					<ci> fast_sodium_current.m </ci>
					<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<ci> deltat </ci>
				</apply>
					<apply><minus/>
					<apply><times/>
				<apply><selector/>
					<ci> fast_sodium_current_m_gate.alpha_m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<cn> 1 </cn>
					<apply><selector/>
					<ci> fast_sodium_current.m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> fast_sodium_current_m_gate.beta_m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.m </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> fast_sodium_current_h_gate.alpha_h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<piecewise>
				   <piece>
					<apply><times/>
				<cn> 0.135 </cn>
					<apply><exp/>
					<apply><divide/>
					<apply><plus/>
					<cn> 80 </cn>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><minus/>
				   <cn> 6.8 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><lt/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
				   <cn> 40 </cn>
				</apply>
				</apply>
				</piece><otherwise>
					<cn> 0 </cn>
				</otherwise>
				</piecewise>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> fast_sodium_current_h_gate.beta_h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<piecewise>
				   <piece>
					<apply><plus/>
					<apply><times/>
				<cn> 3.56 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.079 </cn>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<cn> 310000 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.35 </cn>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><lt/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
				   <cn> 40 </cn>
				</apply>
				</apply>
				</piece><otherwise>
					<apply><divide/>
					<cn> 1 </cn>
					<apply><times/>
				<cn> 0.13 </cn>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><divide/>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 10.66 </cn>
				</apply>
					<apply><minus/>
				   <cn> 11.1 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</otherwise>
				</piecewise>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
					<apply><minus/>
					<apply><selector/>
					<ci> fast_sodium_current.h </ci>
					<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<ci> deltat </ci>
				</apply>
					<apply><minus/>
					<apply><times/>
				<apply><selector/>
					<ci> fast_sodium_current_h_gate.alpha_h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<cn> 1 </cn>
					<apply><selector/>
					<ci> fast_sodium_current.h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> fast_sodium_current_h_gate.beta_h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.h </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> fast_sodium_current_j_gate.alpha_j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<piecewise>
				   <piece>
					<apply><divide/>
					<apply><times/>
				<apply><minus/>
					<apply><times/>
				<apply><minus/>
				   <cn> 127140 </cn>
				</apply>
					<apply><exp/>
					<apply><times/>
				<cn> 0.2444 </cn>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<cn> 0.00003474 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.04391 </cn>
				</apply>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 37.78 </cn>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.311 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 79.23 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><lt/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
				   <cn> 40 </cn>
				</apply>
				</apply>
				</piece><otherwise>
					<cn> 0 </cn>
				</otherwise>
				</piecewise>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> fast_sodium_current_j_gate.beta_j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<piecewise>
				   <piece>
					<apply><divide/>
					<apply><times/>
				<cn> 0.1212 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.01052 </cn>
				</apply>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.1378 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 40.14 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><lt/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
				   <cn> 40 </cn>
				</apply>
				</apply>
				</piece><otherwise>
					<apply><divide/>
					<apply><times/>
				<cn> 0.3 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.0000002535 </cn>
				</apply>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.1 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 32 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</otherwise>
				</piecewise>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
					<apply><minus/>
					<apply><selector/>
					<ci> fast_sodium_current.j </ci>
					<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<ci> deltat </ci>
				</apply>
					<apply><minus/>
					<apply><times/>
				<apply><selector/>
					<ci> fast_sodium_current_j_gate.alpha_j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<cn> 1 </cn>
					<apply><selector/>
					<ci> fast_sodium_current.j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> fast_sodium_current_j_gate.beta_j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> fast_sodium_current.j </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> slow_inward_current.E_si </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<cn> 7.7 </cn>
					<apply><times/>
				<cn> 13.0287 </cn>
					<apply><ln/>
					<apply><divide/>
					<apply><selector/>
					<ci> slow_inward_current.Cai </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 1 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> membrane.i_si </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<cn> 0.09 </cn>
					<apply><selector/>
					<ci> slow_inward_current.d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> slow_inward_current.f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> slow_inward_current.E_si </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> slow_inward_current_d_gate.alpha_d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><times/>
				<cn> 0.095 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.01 </cn>
				</apply>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 5 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.072 </cn>
				</apply>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 5 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> slow_inward_current_d_gate.beta_d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><times/>
				<cn> 0.07 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.017 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 44 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.05 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 44 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
					<apply><minus/>
					<apply><selector/>
					<ci> slow_inward_current.d </ci>
					<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> slow_inward_current.d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<ci> deltat </ci>
				</apply>
					<apply><minus/>
					<apply><times/>
				<apply><selector/>
					<ci> slow_inward_current_d_gate.alpha_d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<cn> 1 </cn>
					<apply><selector/>
					<ci> slow_inward_current.d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> slow_inward_current_d_gate.beta_d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> slow_inward_current.d </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> slow_inward_current_f_gate.alpha_f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><times/>
				<cn> 0.012 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.008 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 28 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.15 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 28 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> slow_inward_current_f_gate.beta_f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><times/>
				<cn> 0.0065 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.02 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 30 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.2 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 30 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
					<apply><minus/>
					<apply><selector/>
					<ci> slow_inward_current.f </ci>
					<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> slow_inward_current.f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<ci> deltat </ci>
				</apply>
					<apply><minus/>
					<apply><times/>
				<apply><selector/>
					<ci> slow_inward_current_f_gate.alpha_f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<cn> 1 </cn>
					<apply><selector/>
					<ci> slow_inward_current.f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> slow_inward_current_f_gate.beta_f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> slow_inward_current.f </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_dependent_potassium_current.g_K </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<cn> 0.282 </cn>
					<apply><root/>
					 <degree><ci type='integer'> 2 </ci></degree>
					 <apply><divide/>
					<apply><selector/>
					<ci> time_independent_potassium_current.Ko </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 5.4 </cn>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_dependent_potassium_current.E_K </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><divide/>
					<apply><times/>
				<apply><selector/>
					<ci> membrane.R </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> membrane.T </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><selector/>
					<ci> membrane.F </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><ln/>
					<apply><divide/>
					<apply><plus/>
					<apply><selector/>
					<ci> time_independent_potassium_current.Ko </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> time_dependent_potassium_current.PR_NaK </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.Nao </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> time_independent_potassium_current.Ki </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> time_dependent_potassium_current.PR_NaK </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.Nai </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> membrane.i_K </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> time_dependent_potassium_current.g_K </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.Xi </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.E_K </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_dependent_potassium_current_X_gate.alpha_X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><times/>
				<cn> 0.0005 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.083 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 50 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.057 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 50 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_dependent_potassium_current_X_gate.beta_X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><times/>
				<cn> 0.0013 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.06 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 20 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.04 </cn>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 20 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
					<apply><minus/>
					<apply><selector/>
					<ci> time_dependent_potassium_current.X </ci>
					<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<ci> deltat </ci>
				</apply>
					<apply><minus/>
					<apply><times/>
				<apply><selector/>
					<ci> time_dependent_potassium_current_X_gate.alpha_X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<cn> 1 </cn>
					<apply><selector/>
					<ci> time_dependent_potassium_current.X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> time_dependent_potassium_current_X_gate.beta_X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_dependent_potassium_current.X </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_dependent_potassium_current.Xi </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<piecewise>
				   <piece>
					<apply><divide/>
					<apply><times/>
				<cn> 2.837 </cn>
					<apply><minus/>
					<apply><exp/>
					<apply><times/>
				<cn> 0.04 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 77 </cn>
				</apply>
				</apply>
				</apply>
					<cn> 1 </cn>
				</apply>
				</apply>
					<apply><times/>
				<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 77 </cn>
				</apply>
					<apply><exp/>
					<apply><times/>
				<cn> 0.04 </cn>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 35 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><gt/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
				   <cn> 100 </cn>
				</apply>
				</apply>
				</piece><otherwise>
					<cn> 1 </cn>
				</otherwise>
				</piecewise>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_independent_potassium_current.g_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<cn> 0.6047 </cn>
					<apply><root/>
					 <degree><ci type='integer'> 2 </ci></degree>
					 <apply><divide/>
					<apply><selector/>
					<ci> time_independent_potassium_current.Ko </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 5.4 </cn>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_independent_potassium_current.E_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><divide/>
					<apply><times/>
				<apply><selector/>
					<ci> membrane.R </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> membrane.T </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><selector/>
					<ci> membrane.F </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><ln/>
					<apply><divide/>
					<apply><selector/>
					<ci> time_independent_potassium_current.Ko </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_independent_potassium_current.Ki </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> membrane.i_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> time_independent_potassium_current.g_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<ci> time_independent_potassium_current.K1_infinity </ci>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_independent_potassium_current.E_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_independent_potassium_current_K1_gate.alpha_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<cn> 1.02 </cn>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.2385 </cn>
					<apply><minus/>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_independent_potassium_current.E_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<cn> 59.215 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> time_independent_potassium_current_K1_gate.beta_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<apply><plus/>
					<apply><times/>
				<cn> 0.49124 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.08032 </cn>
					<apply><minus/>
					<apply><plus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 5.476 </cn>
				</apply>
					<apply><selector/>
					<ci> time_independent_potassium_current.E_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><times/>
				<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<cn> 0.06175 </cn>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> time_independent_potassium_current.E_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<cn> 594.31 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><times/>
				<apply><minus/>
				   <cn> 0.5143 </cn>
				</apply>
					<apply><plus/>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_independent_potassium_current.E_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<cn> 4.753 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<ci> time_independent_potassium_current.K1_infinity </ci>
					<apply><divide/>
					<apply><selector/>
					<ci> time_independent_potassium_current_K1_gate.alpha_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><plus/>
					<apply><selector/>
					<ci> time_independent_potassium_current_K1_gate.alpha_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_independent_potassium_current_K1_gate.beta_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> plateau_potassium_current.E_Kp </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> time_independent_potassium_current.E_K1 </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> plateau_potassium_current.Kp </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><divide/>
					<cn> 1 </cn>
					<apply><plus/>
					<cn> 1 </cn>
					<apply><exp/>
					<apply><divide/>
					<apply><minus/>
					<cn> 7.488 </cn>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<cn> 5.98 </cn>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> membrane.i_Kp </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> plateau_potassium_current.g_Kp </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> plateau_potassium_current.Kp </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> plateau_potassium_current.E_Kp </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><selector/>
					<ci> membrane.i_b </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><times/>
				<apply><selector/>
					<ci> background_current.g_b </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><minus/>
					<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> background_current.E_b </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>

				<apply loop1 = "inner" loop2 = "inner" loop3 = "inner"><eq/>
					<apply><divide/>
					<apply><minus/>
					<apply><selector/>
					<ci> slow_inward_current.Cai </ci>
					<apply><plus/>
					<ci> n </ci>
					<cn> 1 </cn>
				</apply>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
					<apply><selector/>
					<ci> slow_inward_current.Cai </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<ci> deltat </ci>
				</apply>
					<apply><plus/>
					<apply><times/>
				<apply><divide/>
					<apply><minus/>
				   <cn> 0.0001 </cn>
				</apply>
					<cn> 1 </cn>
				</apply>
					<apply><selector/>
					<ci> membrane.i_si </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
					<apply><times/>
				<cn> 0.07 </cn>
					<apply><minus/>
					<cn> 0.0001 </cn>
					<apply><selector/>
					<ci> slow_inward_current.Cai </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
				</apply>
				</apply>
				</apply>
				</apply>

	<!-- loop3 loopcond -->
				<condition loop1 = "inner" loop2 = "inner" loop3 = "loopcond">
					<apply><eq/>
						<ci>l</ci>
						<cn>100</cn>
					</apply>
				</condition>
				
				<!-- loop3 final -->
				<apply loop1 = "inner" loop2 = "inner" loop3 = "final"><eq/>
					<ci>V3end</ci>
					<apply><selector/>
						<ci> membrane.V </ci>
						<ci> n </ci>
						<ci> j </ci>
						<ci> l </ci>
					</apply>
				</apply>
				
				<!-- loop3 post -->
			
			<condition loop1 = "inner" loop2 = "loopcond">
				<apply><eq/>
					<ci>j</ci>
					<cn>100</cn>
				</apply>
			</condition>
			
			<!-- loop2 final -->
			<apply loop1 = "inner" loop2 = "final"><eq/>
				<ci>V2end</ci>
				<apply><selector/>
					<ci> membrane.V </ci>
					<ci> n </ci>
					<ci> j </ci>
					<ci> l </ci>
				</apply>
			</apply>
			
			<!-- loop2 post -->
			
		<condition loop1 = "loopcond">
			<apply><eq/>
				<ci>n</ci>
				<cn>100</cn>
			</apply>
		</condition>
		
		<!-- loop1 final -->
		<apply loop1 = "final"><eq/>
			<ci>V1end</ci>
			<apply><selector/>
				<ci> membrane.V </ci>
				<ci> n </ci>
				<ci> j </ci>
				<ci> l </ci>
			</apply>
		</apply>
			
				
	</math>
</recml>